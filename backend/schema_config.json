{
  "table_name": "agricultural_hexes",
  "description": "H3 hexagon grid cells representing agricultural field data with soil nutrient levels and application recommendations",
  "columns": [
    {
      "name": "h3_index",
      "type": "VARCHAR",
      "description": "Unique H3 hexagon identifier (geospatial index)",
      "notes": "Required in SELECT for map highlighting.",
      "example": "8d44ec2b24d427f"
    },
    {
      "name": "field_name",
      "type": "VARCHAR",
      "description": "Name identifier for the agricultural field",
      "notes": "Use for grouping and comparing across fields",
      "values": ["North of Road", "Railroad Pivot", "South of Road"]
    },
    {
      "name": "yield_target",
      "type": "DOUBLE",
      "description": "The farmer's intended yield goal for the hexagon",
      "unit": "bushels per acre",
      "range": "175-240",
      "notes": "Higher values indicate areas with better yield potential. Common targets are 175 bu/ac for lower productivity areas and 240 bu/ac for high productivity zones."
    },
    {
      "name": "P_in_soil",
      "type": "DOUBLE",
      "description": "Current phosphorus level in soil",
      "unit": "lbs per acre",
      "range": "40-120",
      "thresholds": {
        "low": "< 60",
        "medium": "60-90",
        "high": "> 90"
      },
      "notes": "Phosphorus is critical for root development and energy transfer. Low P soils require supplemental fertilizer."
    },
    {
      "name": "K_in_soil",
      "type": "DOUBLE",
      "description": "Current potassium level in soil",
      "unit": "lbs per acre",
      "range": "150-450",
      "thresholds": {
        "low": "< 180",
        "medium": "180-250",
        "high": "> 250"
      },
      "notes": "Potassium helps with disease resistance and water regulation. Essential for overall plant health."
    },
    {
      "name": "N_in_soil",
      "type": "DOUBLE",
      "description": "Current nitrogen level in soil",
      "unit": "lbs per acre",
      "range": "0-20",
      "thresholds": {
        "low": "< 10",
        "medium": "10-15",
        "high": "> 15"
      },
      "notes": "Nitrogen is typically very low in soil tests as it's highly mobile. Most N comes from fertilizer application."
    },
    {
      "name": "N_to_apply",
      "type": "DOUBLE",
      "description": "Recommended nitrogen fertilizer application amount",
      "unit": "lbs per acre",
      "range": "0-300",
      "notes": "Application rate based on yield target and soil test. Higher yield targets require more N."
    },
    {
      "name": "P_to_apply",
      "type": "DOUBLE",
      "description": "Recommended phosphorus fertilizer application amount",
      "unit": "lbs P2O5 per acre",
      "range": "0-140",
      "notes": "Calculated based on soil test levels. Areas with low P_in_soil will have higher P_to_apply values."
    },
    {
      "name": "K_to_apply",
      "type": "DOUBLE",
      "description": "Recommended potassium fertilizer application amount",
      "unit": "lbs K2O per acre",
      "range": "0-200",
      "notes": "Based on soil K levels and crop removal rates. Zero application when K_in_soil is adequate."
    },
    {
      "name": "geometry",
      "type": "GEOMETRY",
      "description": "Spatial polygon representing the hexagon boundary",
      "notes": "Use for spatial queries, distance calculations, and area computations with DuckDB spatial functions."
    }
  ],
  "query_hints": [
    "When asked about 'low' nutrients, use the thresholds defined above",
    "When asked about 'needs' or 'requires' fertilizer, look at the *_to_apply columns",
    "For cost calculations, users typically refer to fertilizer application amounts",
    "When comparing fields, GROUP BY field_name",
    "When asked about 'problem areas' or 'attention needed', look for low nutrient levels or high application requirements"
  ],
  "domain_knowledge": [
    "Corn typically requires 1.0 lb N per bushel of grain produced",
    "Phosphorus fertilizer prices vary but average $0.3465 per lb P",
    "Potassium fertilizer prices average $0.202 per lb K2O",
    "Nitrogen fertilizer prices average $0.45-0.65 per lb N",
    "Variable rate application saves money by only applying where needed"
  ]
}
